!function(){"use strict";!function(){var t=JSON.parse('[{"trade":"Gen","rate":20},{"trade":"Demo","rate":10},{"trade":"Conc","rate":5},{"trade":"Mas","rate":4},{"trade":"Mtls","rate":15},{"trade":"Wood","rate":20},{"trade":"Therm","rate":20},{"trade":"Fins","rate":18},{"trade":"Spec","rate":10},{"trade":"Furn","rate":15},{"trade":"Spec","rate":2},{"trade":"Conv","rate":25},{"trade":"Mech","rate":14},{"trade":"Plbg","rate":20},{"trade":"Elec","rate":22},{"trade":"FP","rate":2.75}]'),e=function(t){return JSON.parse(JSON.stringify(t))};const a=document.getElementById("user-instructions"),r=document.getElementById("modal-button"),n=document.getElementById("close-button");r.onclick=function(){a.style.display="block"},n.onclick=function(){a.style.display="none"},window.onclick=function(t){t.target===a&&(a.style.display="none")};let i=e(t),l=new class{constructor(t,e,a){this.width=t,this.height=e,this.margin=a}createChart(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let a=0;a<t.length;a++)t[a].rate*=e;this.updateChart(t)}updateChart(t){const e=Intl.NumberFormat("en-US");this.svg=d3.select("#main-chart").append("svg").attr("height",this.height-this.margin.top-this.margin.bottom).attr("width",this.width).attr("viewBox",[0,0,this.width,this.height]),this.x=d3.scaleBand().domain(d3.range(t.length)).range([this.margin.left,this.width-this.margin.right]).padding(.1),this.y=d3.scaleLinear().domain([0,d3.max(t.map((t=>t.rate)))]).range([this.height-this.margin.bottom,this.margin.top]),this.tooltip=d3.select("#tooltip").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border-radius","5px").style("position","absolute"),this.svg.append("g").attr("fill","royalblue").selectAll("rect").data(t).join("rect").attr("x",((t,e)=>this.x(e))).attr("y",(t=>this.y(t.rate))).attr("height",(t=>this.y(0)-this.y(t.rate))).attr("width",this.x.bandwidth()).attr("class","bar").on("mousemove",((t,a)=>{this.tooltip.style("opacity",.8).html(`Total: $ ${e.format(a.rate)}</br>Material: $ ${e.format(Math.floor(.4*a.rate))}</br>Labor: $ ${e.format(Math.floor(.6*a.rate))}`).style("left",`${t.x+15}px`).style("top",`${t.y+15}px`).style("border","2px solid").style("font-size","22px"),console.log(t)})).on("mouseleave",(t=>{this.tooltip.style("opacity",0)})),this.svg.append("g").call(function(e){e.attr("transform",`translate(0, ${this.height-this.margin.bottom})`).call(d3.axisBottom(this.x).tickFormat((e=>t[e].trade))).attr("font-size","20px")}.bind(this)),this.svg.append("g").call(function(e){e.attr("transform",`translate(${this.margin.left}, 0)`).call(d3.axisLeft(this.y).ticks(null,t.format)).attr("font-size","20px")}.bind(this)),this.svg.node()}deleteChart(){document.getElementById("main-chart").innerHTML=""}getTotal(t,e){const a=document.getElementById("total-value"),r=document.getElementById("budget-value"),n=document.getElementById("delta-value");let i=0;for(let e=0;e<t.length;e++)i+=t[e].rate;const l=Intl.NumberFormat("en-US"),o=l.format(i),d=l.format(e),s=l.format(e-i);a.innerHTML=`$${o}`,r.innerHTML=`$${d}`,n.innerHTML=`$${s}`;document.getElementById("delta-display-container").style.borderBottomColor=e-i<0?"red":"green"}}(1200,540,{top:50,bottom:50,left:50,right:50});l.createChart(i),i=e(t);let o,d,s=document.getElementById("user-input");s&&s.addEventListener("submit",(function(a){a.preventDefault(),o=document.getElementById("sf").value,d=document.getElementById("budget").value,u(),l.deleteChart(),i=e(t),l.createChart(i,o),l.getTotal(i,d)}));const c=document.getElementById("trades-excluded"),h=document.getElementById("trade-selector");let m=[];h&&h.addEventListener("click",(function(t){let e=t.target;if("trade"===e.className){c.appendChild(t.target);for(let t=0;t<i.length;t++)i[t].trade===e.id&&(m.push(i[t]),i=i.slice(0,t).concat(i.slice(t+1)));l.deleteChart(),l.updateChart(i),l.getTotal(i,d)}}));let g=document.getElementById("trades-excluded");function u(){for(let t=0;t<m.length;t++){let e=document.getElementById(m[t].trade);h.appendChild(e)}m=[]}g&&g.addEventListener("click",(function(t){let e=t.target;if("trade"===e.className){h.appendChild(t.target);for(let t=0;t<m.length;t++)m[t].trade===e.id&&(i.push(m[t]),m=m.slice(0,t).concat(m.slice(t+1)));l.deleteChart(),l.updateChart(i),l.getTotal(i,d)}}));let p=document.getElementById("reset-button");p&&p.addEventListener("click",(function(a){l.deleteChart(),i=e(t),l.createChart(i),u()}))}()}();
//# sourceMappingURL=main.js.map